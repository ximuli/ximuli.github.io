<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="leyili">
  <meta name="description" content="乐亦栗的个人网站">
  <meta name="keywords" content="前端，个人网站，前端笔记，随笔，杂文">
  
  <link rel="prev" href="https://ximuli.github.io/2018/js%E6%95%B0%E7%BB%84/" />
  <link rel="next" href="https://ximuli.github.io/2018/dom-api/" />
  <link rel="canonical" href="https://ximuli.github.io/2018/js%E5%87%BD%E6%95%B0/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           JS函数 | 乐亦栗的个人网站
       
  </title>
  <meta name="title" content="JS函数 | 乐亦栗的个人网站">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/ximuli.github.io\/"
    },
    "articleSection" : "posts",
    "name" : "JS函数",
    "headline" : "JS函数",
    "description" : "函数的五种声明方式  具名函数\nfunction f(x,y){ return x\x2by } f.name \/\/ \x27f\x27  匿名函数\nvar f f = function(x,y){ return x\x2by } f.name \/\/ \x27f\x27  具名函数赋值\nvar f f = function f2(x,y){ return x\x2by } f.name \/\/ \x27f2\x27 console.log(f2) \/\/ Uncaught ReferenceError: f2 is not defined  window.Function （不推荐）\nvar f = new Function(\x27x\x27,\x27y\x27,\x27return x\x2by\x27) f.name \/\/ \x26quot;anonymous\x26quot;  箭头函数\nvar f = (x,y) =\x26gt; { return x\x2by } var sum = (x,y) =\x26gt; x\x2by \/\/等同于 var sum = (x,y) =\x26gt; {return x\x2by} var n2 = n =\x26gt; n*n \/\/等同于 var n2 = (n) =\x26gt; {return n*n}    注意函数的 name 属性在不同的声明方法中各种不同的表现。",
    "inLanguage" : "zh-CN",
    "author" : "leyili",
    "creator" : "leyili",
    "publisher": "leyili",
    "accountablePerson" : "leyili",
    "copyrightHolder" : "leyili",
    "copyrightYear" : "2018",
    "datePublished": "2018-06-01 00:00:00 \x2b0000 UTC",
    "dateModified" : "2018-06-01 00:00:00 \x2b0000 UTC",
    "url" : "https:\/\/ximuli.github.io\/2018\/js%E5%87%BD%E6%95%B0\/",
    "wordCount" : "313",
    "keywords" : [ "JavaScript", "乐亦栗的个人网站"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://ximuli.github.io/">乐亦栗的个人网站</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">文章</a>
                
                <a class="menu-item" href="/categories/" title="">分类</a>
                
                <a class="menu-item" href="/tags/" title="">标签</a>
                
                <a class="menu-item" href="/contact/" title="">联系我</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://ximuli.github.io/">乐亦栗的个人网站</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">文章</a>
                
                <a class="menu-item" href="/categories/" title="">分类</a>
                
                <a class="menu-item" href="/tags/" title="">标签</a>
                
                <a class="menu-item" href="/contact/" title="">联系我</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">JS函数</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://ximuli.github.io/" rel="author">leyili</a> with ♥ 
                <span class="post-time">
                on <time datetime=2018-06-01 itemprop="datePublished">June 1, 2018</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://ximuli.github.io/categories/%E6%8A%80%E6%9C%AF/"> 技术 </a>
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          

<h1 id="函数的五种声明方式">函数的五种声明方式</h1>

<ol>
<li><p>具名函数</p>

<pre><code class="language-javascript">function f(x,y){
 return x+y
}
f.name // 'f'
</code></pre></li>

<li><p>匿名函数</p>

<pre><code class="language-javascript">var f
f = function(x,y){
 return x+y
}
f.name // 'f'
</code></pre></li>

<li><p>具名函数赋值</p>

<pre><code class="language-javascript">var f
f = function f2(x,y){ return x+y }
f.name // 'f2'
console.log(f2) // Uncaught ReferenceError: f2 is not defined
</code></pre></li>

<li><p>window.Function  （不推荐）</p>

<pre><code class="language-javascript">var f = new Function('x','y','return x+y')
f.name // &quot;anonymous&quot;
</code></pre></li>

<li><p>箭头函数</p>

<pre><code class="language-javascript">var f = (x,y) =&gt; {
 return x+y
}
 
var sum = (x,y) =&gt; x+y
//等同于
var sum = (x,y) =&gt; {return x+y}
  
var n2 = n =&gt; n*n
//等同于
var n2 = (n) =&gt; {return n*n}
</code></pre></li>
</ol>

<blockquote>
<p>注意函数的 name 属性在不同的声明方法中各种不同的表现。</p>
</blockquote>

<h1 id="函数的本质">函数的本质</h1>

<blockquote>
<p>函数就是一段可以反复调用的代码块。</p>
</blockquote>

<ol>
<li>回顾一下</li>
</ol>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="../imgs/回顾原型.jpg" alt="回顾原型" class="lazyload"><figcaption class="image-caption">回顾原型</figcaption></figure></p>

<ol>
<li>函数的调用</li>
</ol>

<blockquote>
<p>f.call(asThis, input1,input2)
其中 asThis 会被当做 this，[input1,input2] 会被当做 arguments
禁止使用 f(input1, input2)，因为学会 .call 才能理解 this</p>
</blockquote>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="../imgs/函数的本质.jpg" alt="函数的本质" class="lazyload"><figcaption class="image-caption">函数的本质</figcaption></figure></p>

<h1 id="this-和-arguments">this 和 arguments</h1>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="../imgs/this-arguments.jpg" alt="this-arguments" class="lazyload"><figcaption class="image-caption">this-arguments</figcaption></figure></p>

<p>来看一个例子：</p>

<pre><code class="language-javascript">var f = function () {
  console.log(this)
  console.log(this === window)
}

f.call(undefined,2,3)
// Window {postMessage: ƒ, blur: ƒ, focus: ƒ, close: ƒ, frames: Window, …}
// true
</code></pre>

<p>第一个参数明明是 undefined，但是浏览器自动把 this 变成了 window。</p>

<p>我们需要用严格模式来看一下：</p>

<pre><code class="language-javascript">var f = function () {
  'use strict'
  console.log(this)
  console.log(this === window)
}

f.call(undefined,2,3)
// undefined
// false

f.call('666',3,4)
// 666
// false
</code></pre>

<p>这样才符合我们的预期，即：this 就是 call 中的第一个参数；而后面的参数则组成 arguments 。</p>

<h1 id="call-stack">call stack</h1>

<ul>
<li>call stack（调用堆栈）先入后出</li>
<li>每进入一个函数中，会把函数的位置记录在 stack 里面，等 return 的时候就回到 stack 最顶部的位置。</li>
</ul>

<p>递归，每次进一个函数就要压一次 stack，压入过多会导致 stack overflow</p>

<pre><code class="language-javascript">function sum(n) {
  if (n === 1) {
    return 1
  }
  else {
    return n + sum.call(undefined, n-1)
  }
}
sum.call(undefined, 5)//试着把这个值改成很大的值，会出现 stack overflow
//15
sum.call(undefined, 27988)  // 2018年6月1日 Chrome
//391678066
sum.call(undefined, 27989)
//Uncaught RangeError: Maximum call stack size exceeded
</code></pre>

<p>来看几个可视化的例子：</p>

<ul>
<li><a href="http://latentflip.com/loupe/?code=ZnVuY3Rpb24gYSgpewogICAgY29uc29sZS5sb2coJ2EnKQogIHJldHVybiAnYScgIAp9CgpmdW5jdGlvbiBiKCl7CiAgICBjb25zb2xlLmxvZygnYicpCiAgICByZXR1cm4gJ2InCn0KCmZ1bmN0aW9uIGMoKXsKICAgIGNvbnNvbGUubG9nKCdjJykKICAgIHJldHVybiAnYycKfQoKYS5jYWxsKCkKYi5jYWxsKCkKYy5jYWxsKCk%3D!!!" rel="nofollow noreferrer" target="_blank">普通调用</a></li>
<li><a href="http://latentflip.com/loupe/?code=ZnVuY3Rpb24gYSgpewogICAgY29uc29sZS5sb2coJ2ExJykKICAgIGIuY2FsbCgpCiAgICBjb25zb2xlLmxvZygnYTInKQogIHJldHVybiAnYScgIAp9CmZ1bmN0aW9uIGIoKXsKICAgIGNvbnNvbGUubG9nKCdiMScpCiAgICBjLmNhbGwoKQogICAgY29uc29sZS5sb2coJ2IyJykKICAgIHJldHVybiAnYicKfQpmdW5jdGlvbiBjKCl7CiAgICBjb25zb2xlLmxvZygnYycpCiAgICByZXR1cm4gJ2MnCn0KYS5jYWxsKCkKY29uc29sZS5sb2coJ2VuZCcp!!!" rel="nofollow noreferrer" target="_blank">嵌套调用</a></li>
<li><a href="http://latentflip.com/loupe/?code=ZnVuY3Rpb24gc3VtKG4pewogICAgaWYobj09MSl7CiAgICAgICAgcmV0dXJuIDEKICAgIH1lbHNlewogICAgICAgIHJldHVybiBuICsgc3VtLmNhbGwodW5kZWZpbmVkLCBuLTEpCiAgICB9Cn0KCnN1bS5jYWxsKHVuZGVmaW5lZCw1KQ%3D%3D!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D" rel="nofollow noreferrer" target="_blank">递归调用</a></li>
</ul>

<h1 id="作用域">作用域</h1>

<ul>
<li><p>变量声明提升</p>

<pre><code class="language-javascript">var a = 1
function f1(){
alert(a) // 是多少
var a = 2
}
f1.call()
</code></pre></li>

<li><p>就近原则</p>

<pre><code class="language-javascript">var a = 1
function f1(){
var a = 2
f2.call()
}
function f2(){
console.log(a) // 是多少
}
f1.call()
</code></pre></li>

<li><p>我们只能确定变量是哪个变量，但是不能确定变量的值</p>

<pre><code class="language-javascript">// 先来写 6 个 li 标签
var liTags = document.querySelectorAll('li')
for(var i = 0; i&lt;liTags.length; i++){
liTags[i].onclick = function(){
    console.log(i) // 点击第3个 li 时，打印 2 还是打印 6？
}
}
</code></pre></li>
</ul>

<h1 id="闭包">闭包</h1>

<blockquote>
<p>如果一个函数，使用了它范围外的变量，那么（这个函数 + 这个变量）就叫做闭包。</p>
</blockquote>

<p>请参看：</p>

<p><a href="https://zhuanlan.zhihu.com/p/22486908" rel="nofollow noreferrer" target="_blank">JS 中的闭包是什么？</a></p>

<p>（待续）</p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>leyili </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://ximuli.github.io/2018/js%E5%87%BD%E6%95%B0/>https://ximuli.github.io/2018/js%E5%87%BD%E6%95%B0/</span>
            </p>
            
             
            <p class="copyright-item lincese">
                本文采用<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>进行许可
            </p>
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://ximuli.github.io/tags/javascript/">
                    #JavaScript</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://ximuli.github.io/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://ximuli.github.io/2018/js%E6%95%B0%E7%BB%84/" class="prev" rel="prev" title="JS数组"><i class="iconfont icon-left"></i>&nbsp;JS数组</a>
         
        
        <a href="https://ximuli.github.io/2018/dom-api/" class="next" rel="next" title="DOM-API">DOM-API&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2016 - 2019</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://ximuli.github.io/">leyili</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  



     </div>
  </body>
</html>
